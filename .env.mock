# ============================================================================
# Real Estate OS - Mock Mode Configuration
# ============================================================================
# Self-contained development environment with NO external dependencies.
# All services run locally in Docker - no real API keys required.
#
# Mock Services:
#  - Email: MailHog SMTP (localhost:1025, UI: localhost:8025)
#  - SMS: Mock Twilio (localhost:4010)
#  - Storage: MinIO (localhost:9000)
#  - PDF: Gotenberg (localhost:3000)
#  - LLM: Deterministic templates (no API calls)
#
# Usage:
#   cp env/.env.mock .env
#   docker compose up -d
# ============================================================================

# =============================================================================
# APPLICATION MODE
# =============================================================================
APP_MODE=mock
ENVIRONMENT=development
DEBUG=true

# =============================================================================
# DATABASE
# =============================================================================
DB_DSN=postgresql://postgres:postgres@postgres:5432/real_estate_os
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# =============================================================================
# REDIS (Caching & Sessions)
# =============================================================================
REDIS_URL=redis://redis:6379/0

# =============================================================================
# MESSAGE QUEUE
# =============================================================================
RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672/
CELERY_BROKER_URL=amqp://guest:guest@rabbitmq:5672/
CELERY_RESULT_BACKEND=redis://redis:6379/1

# =============================================================================
# AUTHENTICATION (Safe mock secrets)
# =============================================================================
JWT_SECRET_KEY=mock-secret-key-for-development-only-do-not-use-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=1440
REFRESH_TOKEN_EXPIRATION_DAYS=30

# =============================================================================
# EMAIL SERVICE (MailHog SMTP - No real sends)
# =============================================================================
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_FROM=noreply@realtor-demo.com
SMTP_USER=
SMTP_PASSWORD=

# SendGrid (Disabled in mock mode - no API key)
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@realtor-demo.com
SENDGRID_FROM_NAME=Real Estate OS (Mock)
SENDGRID_WEBHOOK_SECRET=mock-webhook-secret

# =============================================================================
# SMS & VOICE (Mock Twilio - No real sends)
# =============================================================================
MOCK_TWILIO_URL=http://mock-twilio:4010
TWILIO_FROM_PHONE=+15555551234
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
TWILIO_VERIFY_SERVICE_SID=

# =============================================================================
# OBJECT STORAGE (MinIO - Local S3-compatible)
# =============================================================================
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=real-estate-os-files
S3_USE_SSL=false

S3_MEMOS_FOLDER=memos/
S3_PACKETS_FOLDER=packets/
S3_ARTIFACTS_FOLDER=artifacts/

# =============================================================================
# PDF GENERATION (Gotenberg - Local service)
# =============================================================================
GOTENBERG_URL=http://gotenberg:3000
PDF_PROVIDER=gotenberg

# =============================================================================
# DATA PROVIDER APIs (Disabled - Mock data only)
# =============================================================================
ATTOM_API_KEY=
ATTOM_API_URL=https://api.gateway.attomdata.com/propertyapi/v1.0.0
ATTOM_MONTHLY_QUOTA=0
ATTOM_COST_PER_REQUEST=0.00

REGRID_API_TOKEN=
REGRID_API_URL=https://app.regrid.com/api/v2
REGRID_MONTHLY_QUOTA=0
REGRID_COST_PER_REQUEST=0.00

# =============================================================================
# MONITORING & LOGGING (Disabled for mock mode)
# =============================================================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.0

DATADOG_API_KEY=
DATADOG_APP_KEY=

LOG_LEVEL=DEBUG

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
API_V1_PREFIX=/api/v1
API_TITLE=Real Estate OS API (Mock Mode)
API_VERSION=1.0.0

DEFAULT_PAGE_SIZE=100
MAX_PAGE_SIZE=1000

# =============================================================================
# CORS & SECURITY
# =============================================================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080

CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# SECURITY HEADERS (Relaxed for development)
# =============================================================================
SECURE_HSTS_SECONDS=0
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true
SECURE_SSL_REDIRECT=false

# =============================================================================
# FEATURE FLAGS (All enabled for testing)
# =============================================================================
FEATURE_EXTERNAL_SENDS=false  # Disabled: No real external sends
FEATURE_USE_LLM=false  # Disabled: Use deterministic templates
FEATURE_RATE_LIMIT=true
FEATURE_WEBHOOK_SIGNATURES=true
FEATURE_CACHE_RESPONSES=true

FEATURE_EMAIL_SENDING=true  # Sends to MailHog
FEATURE_SMS_SENDING=true  # Sends to Mock Twilio
FEATURE_PDF_GENERATION=true  # Uses Gotenberg
FEATURE_REAL_TIME_UPDATES=true
FEATURE_BACKGROUND_JOBS=true
FEATURE_DATA_ENRICHMENT=false  # Uses mock data
FEATURE_ANALYTICS=true

# =============================================================================
# BUSINESS LOGIC
# =============================================================================
DEFAULT_MONTHLY_BUDGET_CAP=500.00
COST_ALERT_THRESHOLD=0.80

DEFAULT_CADENCE_PAUSE_ON_REPLY=true
DEFAULT_CADENCE_MAX_UNOPENED=3

DNC_CHECK_ENABLED=true
AUTO_UNSUBSCRIBE_ENABLED=true

MEMO_GENERATION_TIMEOUT_SECONDS=30
MEMO_CACHE_TTL_HOURS=24

BOUNCE_RATE_THRESHOLD=0.03
SUPPRESSION_LIST_AUTO_ADD=true

# =============================================================================
# FRONTEND & BACKEND URLs
# =============================================================================
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://api:8000
PUBLIC_API_URL=http://localhost:8000

SHARE_LINK_DOMAIN=localhost:3000
SHARE_LINK_BASE_URL=http://localhost:3000/share

# =============================================================================
# WEBHOOK URLS (Internal for mock services)
# =============================================================================
WEBHOOK_BASE_URL=http://api:8000/api/v1/webhooks

# =============================================================================
# AUDIT ARTIFACTS (For evidence generation)
# =============================================================================
AUDIT_ARTIFACTS_DIR=./audit_artifacts

# =============================================================================
# PROVIDER MODE OVERRIDES (Optional per-provider control)
# =============================================================================
# PROVIDER_MODE_EMAIL=mock
# PROVIDER_MODE_SMS=mock
# PROVIDER_MODE_STORAGE=mock
# PROVIDER_MODE_PDF=mock
# PROVIDER_MODE_LLM=mock
